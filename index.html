<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Budget Tracker</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Adding jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
  </head>
  <body>
    <div class="container">
      <h1>Budget Tracker</h1>

      <!-- Top Dashboard Container -->
      <div class="dashboard-container">
        <!-- Balance Overview -->
        <div class="balance-container">
          <div class="balance-card">
            <h3>Current Balance</h3>
            <h1 id="balance">$0.00</h1>
          </div>
          <div class="summary-container">
            <div class="summary-card income">
              <h4>Income</h4>
              <p id="income-total">$0.00</p>
            </div>
            <div class="summary-card expense">
              <h4>Expense</h4>
              <p id="expense-total">$0.00</p>
            </div>
          </div>
        </div>

        <!-- Chart Section -->
        <div class="chart-container">
          <canvas id="budget-chart"></canvas>
        </div>
      </div>

      <!-- Filter and History Container - Side by Side -->
      <div class="filter-history-container">
        <!-- Date Range Filter and Print Button -->
        <div class="filter-controls">
          <div class="date-filter">
            <div class="form-group">
              <label for="start-date">From:</label>
              <input type="date" id="start-date" />
            </div>
            <div class="form-group">
              <label for="end-date">To:</label>
              <input type="date" id="end-date" />
            </div>
            <button id="apply-filter" class="btn btn-filter">
              Apply Filter
            </button>
            <button id="reset-filter" class="btn btn-reset">Reset</button>
          </div>
          <button id="print-pdf" class="btn btn-print">
            <svg
              width="16"
              height="16"
              fill="currentColor"
              viewBox="0 0 16 16"
              style="margin-right: 5px">
              <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z" />
              <path
                d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z" />
            </svg>
            Print to PDF
          </button>
        </div>

        <!-- Transaction History -->
        <div class="history-container">
          <h3>Transaction History</h3>
          <div class="tabs">
            <button class="tab active" data-tab="all">All</button>
            <button class="tab" data-tab="income">Income</button>
            <button class="tab" data-tab="expense">Expense</button>
          </div>
          <ul id="transaction-list" class="transaction-list">
            <!-- Transactions will be added here dynamically -->
          </ul>
        </div>
      </div>

      <!-- New Transaction Form (Collapsible) -->
      <div class="form-container collapsible">
        <div class="form-header">
          <h3>Add New Transaction</h3>
          <button type="button" id="toggle-form-btn" class="btn-toggle">
            <svg
              width="16"
              height="16"
              fill="currentColor"
              viewBox="0 0 16 16"
              class="expand-icon">
              <path
                d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
            </svg>
            <svg
              width="16"
              height="16"
              fill="currentColor"
              viewBox="0 0 16 16"
              class="collapse-icon"
              style="display: none">
              <path
                d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z" />
            </svg>
          </button>
        </div>
        <div class="form-content" style="display: none">
          <form id="transaction-form">
            <div class="form-group">
              <label for="transaction-type">Type</label>
              <select id="transaction-type" required>
                <option value="income">Income</option>
                <option value="expense">Expense</option>
              </select>
            </div>
            <div class="form-group">
              <label for="transaction-category">Category</label>
              <div class="category-container">
                <select id="transaction-category" required>
                  <!-- Default categories will be loaded dynamically -->
                  <option value="" disabled selected>Select a category</option>
                </select>
                <button
                  type="button"
                  id="add-category-btn"
                  class="btn btn-small"
                  title="Add New Category">
                  <svg
                    width="14"
                    height="14"
                    fill="currentColor"
                    viewBox="0 0 16 16">
                    <path
                      d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
                  </svg>
                </button>
              </div>
            </div>
            <div class="form-group">
              <label for="transaction-description">Description</label>
              <input
                type="text"
                id="transaction-description"
                placeholder="Enter description"
                required />
            </div>
            <div class="form-group">
              <label for="transaction-amount">Amount</label>
              <input
                type="number"
                id="transaction-amount"
                min="0.01"
                step="0.01"
                placeholder="0.00"
                required />
            </div>
            <div class="form-group">
              <label for="transaction-date">Date</label>
              <input type="date" id="transaction-date" required />
            </div>
            <button type="submit" id="transaction-submit" class="btn">
              Add Transaction
            </button>
          </form>
        </div>
      </div>

      <!-- Category Management Modal -->
      <div id="category-modal" class="modal">
        <div class="modal-content">
          <span class="close-category-modal">&times;</span>
          <h2>Manage Categories</h2>
          <div class="category-tabs">
            <button class="category-tab active" data-type="income">
              Income Categories
            </button>
            <button class="category-tab" data-type="expense">
              Expense Categories
            </button>
          </div>
          <div class="category-panel">
            <div class="add-category-form">
              <input
                type="text"
                id="new-category-name"
                placeholder="Enter category name" />
              <button id="save-category-btn" class="btn">Add Category</button>
            </div>
            <h4>Current Categories</h4>
            <ul id="income-categories-list" class="categories-list">
              <!-- Income categories will be loaded here -->
            </ul>
            <ul
              id="expense-categories-list"
              class="categories-list"
              style="display: none">
              <!-- Expense categories will be loaded here -->
            </ul>
          </div>
        </div>
      </div>

      <!-- Print Preview Modal -->
      <div id="print-modal" class="modal">
        <div class="modal-content">
          <span class="close-modal">&times;</span>
          <h2>Print Preview</h2>
          <div id="print-preview-content">
            <div id="preview-summary">
              <!-- Summary content will be inserted here -->
            </div>
            <div id="preview-transactions">
              <!-- Transaction table will be inserted here -->
            </div>
          </div>
          <div class="modal-footer">
            <button id="confirm-print" class="btn">Download PDF</button>
            <button id="cancel-print" class="btn btn-cancel">Cancel</button>
          </div>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
